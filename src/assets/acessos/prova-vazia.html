<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <!-- importando CSS page-racs.css -->
    <link rel="stylesheet" href="/src/assets/css/page-racs.css">
    <script src="https://smtpjs.com/v3/smtp.js"></script>
</head>
<body class="class_body">
    <img src="https://cestsegtrabalho.com.br/wp-content/uploads/2022/09/logo-e1663851774609.png" width="40%">
    <h1>Treinamento</h1>
    <h3><b>Preencha os dados abaixo e coloque as suas respostas<br>
            Nota mínima 80% <br>
        <form id="submit" action="#" name="form-contact">
        <input type="text" id="name" placeholder="Nome completo:" required><br>
        <input type="text" id="whatsapp" placeholder="Whatsapp:" required><br>
        <input type="email" id="email" placeholder="Email:" required><br>
        <input type="text" id="nome_empresa" placeholder="Nome da empresa: (Opcional)"><br>
        <input type="text" id="cpf" placeholder="CPF:" required><br>
        <p>Preencha com o nome do treinamento que você está fazendo:</p>
        <input type="text" id="treinamento" placeholder="" required><br>
        <p>Coloque suas respostas A B C D</p>
        <label for="">1)<input type="text" id="resposta1" placeholder="" required><br></label>
        <label for="">2)<input type="text" id="resposta2" placeholder="" required><br></label>
        <label for="">3)<input type="text" id="resposta3" placeholder="" required><br></label>
        <label for="">4)<input type="text" id="resposta4" placeholder="" required><br></label>
        <br> <b> Data </b> <br>
        <input type="date" id="data_Genilson"><br><br>
        <input type="submit" value="Enviar" id="submit">
    </form>
    <script src="./index.js"></script>

    <script>

        //mostra elemento oculto / oculta o elementro visivel
        function ExibirElementOculto() {
                    var display = document.getElementById('formProva').style.display;
                    if (display == "none") {
                        document.getElementById('formProva').style.display = 'block';
                    } else {
                        document.getElementById('formProva').style.display = 'none';
                    }
        }

        //LocalStorage
        function setLocalStorage() {
            localStorage.setItem("name", name.value)
            localStorage.setItem("cpf", cpf.value)
        }
        //Cria variáveis que recebem os valores dos inputs
        const name = document.getElementById('name');
        const whatsapp = document.getElementById('whatsapp');
        const email = document.getElementById('email');
        const nome_empresa = document.getElementById('nome_empresa');
        const cpf = document.getElementById('cpf');
        const datadehoje = document.getElementById('data');
        const submit = document.getElementById('submit');
        const dataGenilson = document.getElementById('data_Genilson');
        const resposta1 = document.getElementById('resposta1')
        const resposta2 = document.getElementById('resposta2')
        const resposta3 = document.getElementById('resposta3')
        const resposta4 = document.getElementById('resposta4')
        const treinamento = document.getElementById('treinamento')


        //atribui variavel ao arquivo global que pega nome e cpf
        nome_aluno = name

        //Pega dia e hora e coloca na variável dataAtual
        const data = new Date()
        const dia = String(data.getDate()).padStart(2, '0') //trasforma 1 em 01
        const mes = String(data.getMonth() + 1).padStart(2, '0') //trasforma 1 em 01
        const ano = data.getFullYear() // 2023
        const hora = String(data.getHours()).padStart(2, '0') //trasforma 1 em 01
        const minuto = String(data.getMinutes()).padStart(2, '0') //trasforma 1 em 01
        const segundo = String(data.getSeconds()).padStart(2, '0') //trasforma 1 em 01
        const dataAtual = `Aluno concluiu a prova em ${dia}/${mes}/${ano} às ${hora}:${minuto}:${segundo}`

        //corpo do email com tudo que será enviado para o Email
        submit.addEventListener('submit',(e)=>{
            e.preventDefault();
            let ebody = `
            <div><img src="https://cestsegtrabalho.com.br/wp-content/uploads/2022/09/logo-e1663851774609.png" width="100%"></div>
            <br><br>
            <h3>O aluno ${name.value} concluiu o treinamento ${treinamento.value} com nota 10</h3>
            <br><br>
            <h3 style="margin: 0%;">Nome do aluno:</h3>${name.value}
            <br><br>
            <h3 style="margin: 0%;">Whatsapp do aluno:</h3>${whatsapp.value}
            <br><br>
            <h3 style="margin: 0%;">Treinamento:</h3>${treinamento.value}
            <br><br>
            <h3 style="margin: 0%;">Email do aluno: </h3>${email.value}
            <br><br>
            <h3 style="margin: 0%;">CPF do aluno: </h3>${cpf.value}
            <br><br>
            <h3 style="margin: 0%;">Nome da Empresa (Opcional): </h3>${nome_empresa.value}
            <br><br>

            <h3>Gabarito do aluno</h3>
            ${resposta1}
            ${resposta2}
            ${resposta3}
            ${resposta4}

            <br><br>
        <h3 style="font-weight: bold;">Data: </h3>${dataGenilson.value}
            `;

            Email.send({
                SecureToken : "58bc9bda-20b7-472d-9522-6edc923b7f69", //add your token here
                To : 'cestsegtrabalho@gmail.com', //pode colocar email.value e será enviado pro email ou colocar o email digitado mas ficará fixo
                From : "cestsegtrabalho@gmail.com", //email que enviará a mensagem para o usuário
                Subject : "O aluno concluiu a prova",
                Body : ebody
            }).then(
                window.location.href = 'https://cestsegtrabalho.com.br/', 
                setLocalStorage()
            );
        });
    </script>
</body>
</html>
<!--COMEÇO DO CSS-->
<style type="text/css">
    input {
        align-content: center;
        align-items: center;
        width: 30%;
    }

    body{
        align-items: center;
        text-align: center;
    }

    @media screen and (max-width: 700px){
        input {
            width: 90%;
        }
    }
</style>
